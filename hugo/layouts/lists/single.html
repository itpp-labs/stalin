{{ partial "header" . }}
{{ partial "nav" . }}
<div class="container">
    <h2 class="subtitle is-size-4-mobile is-size-3-desktop">{{ .Title }}</h2>
        <div class="content">

{{ $data := index .Site.Data.lists .File.BaseFileName }}

<div class="pages">
{{ range $data.pages }}
   <div><img src="/disk/pictures/{{ .image }}"/></div>
{{ end }}
</div>
<script type="text/javascript">
 $('.pages').slick()
 $('.pages img').on('click', function(){
     $('.pages').slick('slickNext')
 })
</script>

{{ range $data.sublists }}
<h3> {{ .title }} </h3>

  {{ range .pages }}
    {{ $pageid := .page.pageid }}
    {{ $pageintom := .page.pageintom }}

  <div id="page{{ $pageid }}">


      <div class="tabs is-toggle is-fullwidth">
          <ul>
              <li class="is-active" data-tab="page{{ $pageid }}-text">
                  <a>Расшифровка</a>
              </li>
              <li data-tab="page{{ $pageid }}-image">
                  <a>
                      Фотография
                  </a>
              </li>
          </ul>
      </div>

      <div class="tab-content">
          <div id="page-{{ $pageintom }}" data-content="page{{ $pageid }}-text">

              {{ range .persons }}
              <p id="page-{{ $pageintom }}-num-{{ .num }}" class="person{{ if .striked }} striked{{end}}{{ if .underlined }} underlined{{end}}"> {{ .num }}. {{ .name }} {{ if .pometa_text }}<span class="pometa">{{.pometa_text}}</span>{{end}}</p>
              {{ end }}

          </div>
          <div class="is-hidden" data-content="page{{ $pageid }}-image">
              <img src="/disk/pictures/{{ .page_image }}"/>
          </div>
      </div>
   </div>
  {{ end }}

{{ end }}

        </div>
</div>

<script type="text/javascript">
 $(document).ready(function() {
     $('.tabs li').on('click', function() {
         var tab = $(this).data('tab');

         $(this).parent().find('li').removeClass('is-active');
         $(this).addClass('is-active');

         $page = $(this).parent().parent().parent();
         $page.find('.tab-content > div').addClass('is-hidden');
         $page.find('div[data-content="' + tab + '"]').removeClass('is-hidden');
     });
 });

</script>

        {{ partial "jsshare" . }}
        {{ partial "disqus" . }}
        {{ partial "footer" . }}
